<h2>Log a Meal</h2>

<form method="POST">
    <label>Restaurant:</label>
    <select name="restaurantID" id="restaurantSelect" onchange="updateLocation()">
        {% for r in restaurants %}
            <option value="{{ r.restaurantID }}" data-location="{{ r.location }}">{{ r.name }}</option>
        {% endfor %}
    </select><br>

    <p><strong>Location:</strong> <span id="locationDisplay">Select a restaurant</span></p>

    <label>Dish Name:</label>
    <input type="text" name="dish_name" required><br>

    <label>Description:</label>
    <textarea name="description"></textarea><br>

    <button type="submit">Add</button>
</form>

<a href="/home">Back to Home</a>

<script>
    function updateLocation() {
        const select = document.getElementById("restaurantSelect");
        const location = select.options[select.selectedIndex].getAttribute("data-location");
        document.getElementById("locationDisplay").innerText = location;
    }

    // Initialize location on page load if a restaurant is preselected
    window.onload = updateLocation;
</script>

